// fetch update destroy


import Fynx from 'fynx'
import {getAgingReports, getAgingReportsSince} from './services'
import Store from '../store'

export const fetchAgingReports = Fynx.createAsyncAction();

const agingReportsFetched = Fynx.createAsyncAction();

// Fetch the data
fetchAgingReports.listen(date => {
  if (date) {
    alert('Not Yet Implemented');
    requestAgingReportsSince(date);
  } else {
    requestAgingReports()
      .then(reports => agingReportsFetched(reports));
  }
});

// Store the data
agingReportsFetched.listen(reports =>
  Store.handleMessage({
    type: Store.MessageTypes.ReplaceAll,
    payload: {
      table: 'agingReports',
      rows: reports.rows
    }
  })
);


//
