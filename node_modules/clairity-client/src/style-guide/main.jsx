// Fixes es6 compatibility error in FixedDataTable

Object.assign = Object.assign || require('object-assign');

var React = require('react'),
    mui = require('material-ui'),

    Router = require('react-router'),
    RouteHandler = Router.RouteHandler,
    AppLeftNav = require('./app-left-nav.jsx'),
    
    FixedDataTable = require('fixed-data-table'),
    Table = FixedDataTable.Table,
    Column = FixedDataTable.Column,
    
    rd3 = require('react-d3'),
    d3 = require('d3');
    
// Table Data

var rows = [
  ['a1', 'b1', 'c1', 'a1', 'b1', 'c1'],
  ['a2', 'b3', 'c2', 'a1', 'b1', 'c1'],
  ['a3', 'b3', 'c3', 'a1', 'b1', 'c1'],
  ['a1', 'b1', 'c1', 'a1', 'b1', 'c1'],
  ['a2', 'b3', 'c2', 'a1', 'b1', 'c1'],
  ['a3', 'b3', 'c3', 'a1', 'b1', 'c1']
];

function rowGetter(rowIndex) {
  return rows[rowIndex];
}

// Set Table width

var tableW = ((window.outerWidth-192)-((window.outerWidth-192) * .08)) * .96;
var columnW = tableW / 5;

// Main Menu Data
  
var nestedMenuItems = [
    { type: mui.MenuItem.Types.NESTED, text: 'Reports', items: [
    { payload: '1', text: 'Nested Item 1' },
    { type: mui.MenuItem.Types.NESTED, text: 'Nested Item 2', items: [
      { payload: '1', text: 'Nested Item 2.1' },
      { type: mui.MenuItem.Types.NESTED, text: 'Nested Item 2.2', items: [
        { payload: '1', text: 'Nested Item 2.2.1' },
        { payload: '3', text: 'Nested Item 2.2.2' }
      ] },
      { payload: '3', text: 'Nested Item 2.3' }
    ] },
    { payload: '3', text: 'Nested Item 3' },
    { type: mui.MenuItem.Types.NESTED, text: 'Nested Item 4', items: [
      { payload: '1', text: 'Nested Item 4.1' },
      { type: mui.MenuItem.Types.NESTED, text: 'Nested Item 4.2', items: [
        { payload: '1', text: 'Nested Item 4.2.1', disabled: true },
        { payload: '3', text: 'Nested Item 4.2.2' }
      ] },
      { payload: '3', text: 'Nested Item 4.3' }
    ] },
    { payload: '4', text: 'Nested Item 5' }
  ] },
  { payload: '1', text: 'Audio Library'},
  { payload: '2', text: 'Settings'},
  { payload: '3', text: 'Logout', disabled: true}
];

// Dropdown Menu Data

var menuItems = [
   { payload: '1', text: 'Dropdown' },
   { payload: '2', text: 'Every Night' },
   { payload: '3', text: 'Weeknights' },
   { payload: '4', text: 'Weekends' },
   { payload: '5', text: 'Weekly' },
];

// Charts

// Colors

// lineChart

var LineChart = rd3.LineChart;

var lineData = [
  {
    name: "series1",
    values: [ { x: 0, y: 20 }, { x: 24, y: 10 } ]
  },
  {
    name: "series2",
    values: [ { x: 70, y: 82 }, { x: 76, y: 82 } ]
  }
];

// Bar Chart

var BarChart = rd3.BarChart;

var barData = [
  {label: 'A', value: 5},
  {label: 'B', value: 6},
  {label: 'C', value: 3},
  {label: 'D', value: 4},
  {label: 'E', value: 10},
  {label: 'F', value: 7}
];

// Pie Chart

var PieChart = rd3.PieChart;

var pieData = [
  {label: 'Margarita', value: 20.0},
  {label: 'John', value: 55.0},
  {label: 'Tim', value: 25.0 }
];

// React

var Main = React.createClass({
    
    mixins: [Router.State],
    
    render: function() {

        return (
            <mui.AppCanvas predefinedLayout={1}>

                <mui.AppBar
                  onMenuIconButtonTouchTap={this._onMenuIconButtonTouchTap}
                  title= "Clarity"
                  zDepth={0}>
                </mui.AppBar>
                
                <AppLeftNav ref="leftNav" />

                <RouteHandler />

                <main>

                    <nav className="main-nav">
                        <mui.Menu menuItems={nestedMenuItems} zDepth={0} />
                    </nav>

                    <section className="content">
                        <section>
                            <div className="grid-33 p-2">
                                <div className="section-header">
                                    <h2>Typography</h2>
                                </div>
                                <h1>h1. Heading</h1>
                                <h2>h2. Heading</h2>
                                <h3>h3. Heading</h3>
                                <h4>h4. Heading</h4>
                                <h5>h5. Heading</h5>
                                <h6>h6. Heading</h6>
                                <p>p. Lorem ipsum dolor sit amet, sed docendi suscipit scripserit eu, persius invenire id sea. Ius dicant facilis propriae an, ut vim nonumy meliore lucilius, usu nonumes phaedrum ad. Ea nam error audiam, oratio nostrud pro id. Ut sea cetero labitur gubergren, munere maiorum nostrum vim ut, te feugiat vulputate cum. Choro volumus sapientem te sed, legimus splendide ad nec.</p>
                            </div>
                            <div className="grid-34 p-2">
                                <div className="section-header">
                                    <h2>Buttons</h2>
                                </div>

                                <section className="p-b-4 center">
                                    <mui.FlatButton label="Default" />
                                    <mui.FlatButton label="Primary" primary={true} />
                                    <mui.FlatButton label="Secondary" secondary={true} />
                                    <mui.FlatButton label="Disabled" disabled={true} />
                                </section>

                                <section className="p-b-4 center">
                                    <mui.RaisedButton label="Default" />
                                    <mui.RaisedButton label="Primary" primary={true} />
                                    <mui.RaisedButton label="Secondary" secondary={true} />
                                    <mui.RaisedButton label="Disabled" disabled={true} />
                                </section>
                                <section className="p-b-4">
                                    <div className="grid-25 p-2 ta-c">
                                        <mui.FloatingActionButton iconClassName="muidocs-icon-action-grade" />
                                    </div>
                                    <div className="grid-25 p-2 ta-c floating-action-button-primary">
                                        <mui.FloatingActionButton iconClassName="muidocs-icon-action-grade" />
                                    </div>
                                    <div className="grid-25 p-2 ta-c">
                                        <mui.FloatingActionButton iconClassName="muidocs-icon-action-grade" secondary={true} />
                                    </div>
                                    <div className="grid-25 p-2 ta-c">
                                        <mui.FloatingActionButton iconClassName="muidocs-icon-action-grade" disabled={true} />
                                    </div>
                                </section>
                                <section className="p-b-8">
                                    <div className="grid-25 p-2 ta-c">
                                        <mui.FloatingActionButton iconClassName="muidocs-icon-action-grade" mini={true}/>
                                    </div>
                                    <div className="grid-25 p-2 ta-c floating-action-button-primary">
                                        <mui.FloatingActionButton iconClassName="muidocs-icon-action-grade" mini={true} />
                                    </div>
                                    <div className="grid-25 p-2 ta-c">
                                        <mui.FloatingActionButton iconClassName="muidocs-icon-action-grade" secondary={true} mini={true} />
                                    </div>
                                    <div className="grid-25 p-2 ta-c">
                                        <mui.FloatingActionButton iconClassName="muidocs-icon-action-grade" disabled={true} mini={true} />
                                    </div>
                                </section>
                                <div className="section-header">
                                    <h2>Icons</h2>
                                </div>
                                <mui.IconButton iconClassName="muidocs-icon-custom-pie" tooltip="Hint"/>
                                <mui.IconButton iconClassName="muidocs-icon-communication-phone" tooltip="Hint"/>
                                <mui.IconButton iconClassName="muidocs-icon-communication-voicemail" tooltip="Hint"/>
                                <mui.IconButton iconClassName="muidocs-icon-navigation-expand-more" tooltip="Hint"/>
                                <mui.IconButton iconClassName="muidocs-icon-action-grade" tooltip="Hint"/>
                                <mui.IconButton iconClassName="muidocs-icon-action-home" tooltip="Hint"/>
                                <mui.IconButton iconClassName="muidocs-icon-action-stars" tooltip="Hint"/>
                                <mui.IconButton iconClassName="muidocs-icon-action-thumb-up" tooltip="Hint"/>
                                <mui.IconButton iconClassName="muidocs-icon-custom-sort" tooltip="Hint"/>
                                <mui.IconButton iconClassName="muidocs-icon-custom-github" tooltip="Hint"/>
                                <mui.IconButton iconClassName="muidocs-icon-custom-arrow-drop-right" tooltip="Hint"/>
                            </div>
                            <div className="grid-33 p-2">
                                <div className="section-header">
                                    <h2>Selectors</h2>
                                </div>

                                <h4>Checkboxes</h4>
                                <mui.Checkbox
                                  name="checkboxName1"
                                  value="checkboxValue1"
                                  label="went for a run today" />
                                <mui.Checkbox
                                  name="checkboxName2"
                                  value="checkboxValue2"
                                  label="fed the dog"
                                  defaultSwitched={true} />
                                <mui.Checkbox
                                  name="checkboxName3"
                                  value="checkboxValue3"
                                  label="built a house on the moon"
                                  disabled={true} />

                                <h4>Radio Buttons</h4>
                                <mui.RadioButtonGroup 
                                  name="shipSpeed"
                                  defaultSelected="not_light">
                                    <mui.RadioButton
                                      value="light"
                                      label="prepare for light speed" />
                                    <mui.RadioButton
                                      value="not_light"
                                      label="light speed too slow"
                                      defaultChecked={true} />
                                   <mui.RadioButton
                                      value="ludicrous"
                                      label="go to ludicous speed"
                                      disabled={true}/>
                                </mui.RadioButtonGroup>

                                <h4>Toggles</h4>
                                <mui.Toggle
                                  name="toggleName1"
                                  value="toggleValue1"
                                  label="activate thrusters" />
                                <mui.Toggle
                                  name="toggleName2"
                                  value="toggleValue2"
                                  label="auto-pilot"
                                  defaultToggled={true} />
                                <mui.Toggle
                                  name="toggleName3"
                                  value="toggleValue3"
                                  label="initiate self-destruct sequence"
                                  disabled={true} />

                                <h4>Slider</h4>
                                    <mui.Slider name="slider1" value={0.7} />
                            </div>
                        </section>
                        <section>
                            <div className="grid-50 p-2">
                                <div className="section-header">
                                    <h2>Inputs</h2>
                                </div>
                                <section className="section-hr">
                                    <div className="grid-50">
                                        <mui.DropDownMenu menuItems={menuItems} />
                                    </div>
                                    <div className="grid-50">
                                        <mui.DatePicker
                                          hintText="Date Picker"
                                          mode="landscape"/>
                                    </div>
                                </section>
                                <section className="section-hr">
                                    <div className="grid-50 p-">
                                        <mui.TextField
                                          hintText="Hint Text" />
                                    </div>
                                    <div className="grid-50">
                                        <mui.TextField
                                          hintText="Disabled Hint Text"
                                          disabled={true} />
                                    </div>
                                </section>
                                <section className="section-hr">
                                    <div className="grid-50">
                                        <mui.TextField
                                          hintText="Hint Text"
                                          defaultValue="Default Value" />
                                    </div>
                                    <div className="grid-50">  
                                        <mui.TextField
                                          hintText="Disabled Hint Text"
                                          disabled={true}
                                          defaultValue="Disabled With Value" />
                                    </div>
                                </section>
                                <section className="section-hr">
                                    <div className="grid-50">  
                                        <mui.TextField
                                          hintText="Hint Text"
                                          floatingLabelText="Floating Label Text" />
                                    </div>
                                    <div className="grid-50">  
                                        <mui.TextField
                                          hintText="Disabled Hint Text"
                                          disabled={true}
                                          floatingLabelText="Disabled Floating Label Text" />
                                    </div>
                                </section>
                                <section className="p-2">
                                    <div className="grid-50">  
                                        <mui.TextField
                                          hintText="Hint Text"
                                          defaultValue="Default Value"
                                          floatingLabelText="Floating Label Text" />
                                    </div>
                                    <div className="grid-50">  
                                        <mui.TextField
                                          hintText="Disabled Hint Text"
                                          disabled={true}
                                          defaultValue="Disabled With Value"
                                          floatingLabelText="Floating Label Text" />
                                    </div>
                                </section>
                            </div>
                            <div className="grid-50 p-2">
                                <div className="section-header">
                                    <h2>Boxes</h2>
                                </div>
                                <section className="p-b-8">
                                    <div className="grid-33 p-2">
                                        <mui.Paper zDepth={1} rounded={true}>
                                          <p className="p-4">Box</p>
                                        </mui.Paper>
                                    </div>
                                    <div className="grid-33 p-2">
                                        <mui.Paper zDepth={1} rounded={true} className="primary">
                                          <p className="p-4">Box</p>
                                        </mui.Paper>
                                    </div>
                                    <div className="grid-33 p-2">
                                        <mui.Paper zDepth={1} rounded={true} className="secondary">
                                          <p className="p-4">Box</p>
                                        </mui.Paper>
                                    </div>
                                </section>
                                <div className="section-header">
                                    <h2>Tabs</h2>
                                </div>
                                <section>
                                    <mui.Tabs> 
                                      <mui.Tab label="Item One" > 
                                        <div className="tab-template-container"> 
                                          <h2 className="mui-font-style-headline">Tab One Template Example</h2> 
                                          <p> 
                                            This is an example of a tab template! 
                                          </p>
                                        </div> 
                                      </mui.Tab> 
                                      <mui.Tab label="Item Two" > 
                                        <div className="tab-template-container"> 
                                          <h2 className="mui-font-style-headline">Tab Two Template Example</h2> 
                                          <p> 
                                            This is another example of a tab template! 
                                          </p>  
                                        </div> 
                                      </mui.Tab> 
                                      <mui.Tab label="Item Three" > 
                                        <div className="tab-template-container"> 
                                          <h2 className="mui-font-style-headline">Tab Three Template Example</h2> 
                                          <p> 
                                            This is another example of a tab template! 
                                          </p> 
                                        </div> 
                                      </mui.Tab> 
                                    </mui.Tabs>
                                </section>
                            </div>
                        </section>
                        <section id="tableContainer">
                            <div className="p-2">
                                <div className="section-header">
                                    <h2>Tables</h2>
                                </div>
                                <Table
                                rowHeight={50}
                                rowGetter={rowGetter}
                                rowsCount={rows.length}
                                width={tableW}
                                height={300}
                                headerHeight={50}>
                                <Column
                                  label="Col 1"
                                  width={columnW}
                                  dataKey={0}
                                />
                                <Column
                                  label="Col 2"
                                  width={columnW}
                                  dataKey={0}
                                />
                                <Column
                                  label="Col 3"
                                  width={columnW}
                                  dataKey={0}
                                />
                                <Column
                                  label="Col 4"
                                  width={columnW}
                                  dataKey={0}
                                />
                                <Column
                                  label="Col 5"
                                  width={columnW}
                                  dataKey={1}
                                />
                              </Table>
                            </div>
                        </section>
                        <section id="tableContainer">
                            <div className="p-2">
                                <div className="section-header">
                                    <h2>Charts</h2>
                                </div>
                                <section>
                                    <div className="grid-33 p-2 ta-c">
                                        <LineChart
                                          data={lineData}
                                          width={400}
                                          height={300}
                                          title="Line Chart"
                                        />
                                    </div>
                                    <div className="grid-34 p-2 ta-c">
                                        <BarChart
                                          data={barData}
                                          width={400}
                                          height={300}
                                          fill={'#3182bd'}
                                          title='Bar Chart'
                                        /> 
                                    </div>
                                    <div className="grid-33 p-2 ta-c">
                                        <PieChart
                                          data={pieData}
                                          width={400}
                                          height={300}
                                          radius={100}
                                          innerRadius={20}
                                          title="Pie Chart"
                                        />
                                    </div>
                                </section>
                            </div>
                        </section>
                    </section>
                </main>

                <div className="footer">
                  <p>

                  </p>
                </div>
            </mui.AppCanvas>
        );
    },

    _onChange: function(extent) {
        this.setState({xScale: d3.time.scale().domain([extent[0], extent[1]]).range([0, 400 - 70])});
    },
    
    _onMenuIconButtonTouchTap: function() {
        this.refs.leftNav.toggle();
    }
    
});

module.exports = Main;