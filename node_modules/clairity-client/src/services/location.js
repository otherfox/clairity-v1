import data from './stubs/aging'
import _ from 'lodash'
import moment from 'moment'

import req from 'superagent'

export function requestLocation(id) {
  return new Promise((s, f) => {
    req.get("http://lab.rairity.com/controller.cfm?event=serialize&authkey=tardis&_c=ample.dao.LocationDAO&_m=getLocationById&id="+id)
      .withCredentials()
      .end((err, res) => {
        if(!err) {
          let location = JSON.parse(res.text);
          //convert text booleans into real booleans
          for(let key in location.customer) {
            switch(location.customer[key]) {
              case 'true':
                location.customer[key] = true;
                break;
              case 'false':
                location.customer[key] = false;
                break;
            }
          }
          s(location);
        } else {
          f(err);
        }
      });
  });
}
