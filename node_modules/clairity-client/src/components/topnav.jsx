
import React from 'react'
import Settings from './settings'
import mui from 'material-ui'

var AppTopNav = mui.LeftNav;
var AppTopBar = mui.AppBar;
    
var menuItems = [
  { route: 'ui-guide', text: 'UI Style Guide' },
  { route: 'sales', text: 'Sales Sample' },
  { route: 'support', text: 'Support Sample' },
  { route: 'finance', text: 'Finance Sample' },
  { route: 'executive', text: 'Executive Sample' }
];

var TopNav = React.createClass ({
    
/*    mixins: [Router.Navigation, Router.State],*/
    
    getInitialState: function() {
        return {
            selectedIndex: null
        }
    },

    render: function() {
        var header = <div className="logo" onClick={this._onHeaderClick}>Clarity</div>;

        return (
          <div>
            <AppTopBar
              onMenuIconButtonTouchTap={this._onMenuIconButtonTouchTap}
              title= "Clarity"
              zDepth={0}>
            </AppTopBar>
            
            <AppTopNav 
              ref="topNav"
              docked={false}
              isInitiallyOpen={false}
              header={header}
              menuItems={menuItems}
/*              selectedIndex={this._getSelectedIndex()}*/
              onChange={this._onLeftNavChange}
            />
            
          </div>
        )
    },
    
    toggle: function() {
        this.refs.topNav.toggle();
    },

/*
    _getSelectedIndex: function() {
        var currentItem;

        for (var i = menuItems.length - 1; i >= 0; i--) {
          currentItem = menuItems[i];
          if (currentItem.route && this.context.isActive(currentItem.route)) return i;
        };
    },
*/

    _onLeftNavChange: function(e, key, payload) {
        console.log(payload.route);
        this.context.transitionTo(payload.route);
    },

    _onHeaderClick: function() {
        this.context.transitionTo('ui-guide');
        this.refs.topNav.close();
    },
    
    _onMenuIconButtonTouchTap: function() {
        console.log('touch');
        this.refs.topNav.toggle();
    }


});

export default TopNav