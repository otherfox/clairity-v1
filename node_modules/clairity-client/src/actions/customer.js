import Fynx from 'fynx'
import {getAllCustomerTypes} from '../services/customer'
import Store from '../store'

export const requestAllCustomerTypes = Fynx.createAsyncAction();

const customerTypesRecieved = Fynx.createAsyncAction();

// Fetch the data
requestAllCustomerTypes.listen(id => {
  getAllCustomerTypes().then(customerTypesRecieved);
});

// Store the data
customerTypesRecieved.listen(customerTypes =>
  Store.handleMessage({
    type: Store.MessageTypes.ReplaceAll,
    payload: {
      table: 'customerTypes',
      rows: customerTypes
    }
  })
);
